# HTTP Client Generator –¥–ª—è Laravel

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

–ú–æ—â–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä HTTP –∫–ª–∏–µ–Ω—Ç–æ–≤ –¥–ª—è Laravel —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∞—Å—Ç–æ–º–Ω—ã—Ö namespace –∏ –ø—É—Ç–µ–π. –≠—Ç–æ—Ç –ø–∞–∫–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–Ω–µ—à–Ω–∏–º–∏ API, –≤–∫–ª—é—á–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Ç–µ—Å—Ç–æ–≤.

## üöÄ –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

HTTP Client Generator - —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è Laravel, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–Ω–µ—à–Ω–∏–º–∏ HTTP API. –ü–∞–∫–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ–ª–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–ª–∞—Å—Å–æ–≤:

- **Attribute –∫–ª–∞—Å—Å—ã** - –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞
- **Request –∫–ª–∞—Å—Å—ã** - –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- **Response –∫–ª–∞—Å—Å—ã** - –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —É—Å–ø–µ—à–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
- **BadResponse –∫–ª–∞—Å—Å—ã** - –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- **Factory –∫–ª–∞—Å—Å—ã** - –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è HTTP –∫–ª–∏–µ–Ω—Ç–æ–≤
- **Test –∫–ª–∞—Å—Å—ã** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ PHPUnit —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

## ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **üéØ –ö–∞—Å—Ç–æ–º–Ω—ã–µ namespace**: –ü–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã namespace –ø–æ–¥ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
- **üìÅ –ì–∏–±–∫–∏–µ –ø—É—Ç–∏**: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—É—Ç–µ–π –¥–ª—è –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤
- **üß™ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PHPUnit —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –≤—Å–µ—Ö –∫–ª–∞—Å—Å–æ–≤
- **‚öôÔ∏è –ì–∏–±–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –∫–æ–Ω—Ñ–∏–≥ —Ñ–∞–π–ª—ã
- **üîÑ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –†–∞–±–æ—Ç–∞–µ—Ç —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏ Laravel HTTP client
- **üì¶ –ü–∞–∫–µ—Ç–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è**: –°–æ–∑–¥–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–ª–∞—Å—Å–æ–≤ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π –∏–ª–∏ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏
- **üé® –ö–∞—Å—Ç–æ–º–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è stub —Ñ–∞–π–ª–æ–≤

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ Composer

–î–æ–±–∞–≤—å—Ç–µ –ø–∞–∫–µ—Ç –≤ –≤–∞—à Laravel –ø—Ä–æ–µ–∫—Ç:

```json
{
    "require": {
        "osddqd/http-client-generator-for-laravel": "dev-master"
    },
    "repositories": [
        {
            "type": "vcs",
            "url": "https://github.com/osddqd/http-client-generator-for-laravel.git"
        }
    ]
}
```

–ó–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
composer install
```

### –ü—É–±–ª–∏–∫–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–î–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```bash
php artisan vendor:publish --provider="osddqd\HttpClientGenerator\HttpClientGeneratorServiceProvider" --tag="config"
```

–î–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ stub-—Ñ–∞–π–ª–æ–≤ (—à–∞–±–ª–æ–Ω–æ–≤):

```bash
php artisan vendor:publish --provider="osddqd\HttpClientGenerator\HttpClientGeneratorServiceProvider" --tag="stubs"
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ –≤–∞—à `.env` —Ñ–∞–π–ª:

```env
# –ë–∞–∑–æ–≤—ã–π namespace –¥–ª—è HTTP –∫–ª–∏–µ–Ω—Ç–æ–≤
HTTP_CLIENT_GENERATOR_NAMESPACE=App\\Http\\Clients

# –ü—É—Ç—å –¥–ª—è –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã—Ö –∫–ª–∞—Å—Å–æ–≤
HTTP_CLIENT_GENERATOR_PATH=app/Http/Clients

# –ü—É—Ç—å –¥–ª—è —Ç–µ—Å—Ç–æ–≤
HTTP_CLIENT_GENERATOR_TESTS_PATH=tests/Unit/Http/Clients

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é true)
HTTP_CLIENT_GENERATOR_GENERATE_TESTS=true

# –ö–∞—Å—Ç–æ–º–Ω—ã–π –ø—É—Ç—å –∫ stub —Ñ–∞–π–ª–∞–º (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
HTTP_CLIENT_GENERATOR_STUBS_PATH=/path/to/custom/stubs
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –°–æ–∑–¥–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–ª–∞—Å—Å–æ–≤ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –∫–ª–∞—Å—Å–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å GitHub API
php artisan http-client-generator:all GitHub GetUser
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —Å–æ–∑–¥–∞—Å—Ç:
- `App\Http\Clients\GitHub\Attributes\GetUserAttribute`
- `App\Http\Clients\GitHub\Requests\GetUserRequest`
- `App\Http\Clients\GitHub\Responses\GetUserResponse`
- `App\Http\Clients\GitHub\Responses\BadResponse`
- `App\Http\Clients\GitHub\Factories\ApiFactory`
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã –≤ `tests/Unit/Http/Clients/GitHub/`

### –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –∫–ª–∞—Å—Å–∞ –∞—Ç—Ä–∏–±—É—Ç–æ–≤
php artisan http-client-generator:attribute GitHub GetUser

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –∫–ª–∞—Å—Å–∞ –∑–∞–ø—Ä–æ—Å–∞
php artisan http-client-generator:request GitHub GetUser

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –∫–ª–∞—Å—Å–∞ –æ—Ç–≤–µ—Ç–∞
php artisan http-client-generator:response GitHub GetUser

# –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
php artisan http-client-generator:bad-response GitHub

# –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–±—Ä–∏–∫–∏
php artisan http-client-generator:factory GitHub Api
```

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤

```php
<?php

use App\Http\Clients\GitHub\Attributes\GetUserAttribute;
use App\Http\Clients\GitHub\Requests\GetUserRequest;
use Illuminate\Http\Client\Factory;

// –°–æ–∑–¥–∞–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –∑–∞–ø—Ä–æ—Å–∞
$attribute = new GetUserAttribute(
    username: 'octocat'
);

// –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞
$httpClient = app(Factory::class);
$request = new GetUserRequest($httpClient);
$response = $request->send($attribute);

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞
if ($response->success()) {
    // –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç
    $userData = $response->original->json();
} else {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏
    $errorMessage = $response->original->body();
}
```

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª–∞—Å—Å–æ–≤ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –±—É–¥–µ—Ç –∏–º–µ—Ç—å —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

```
app/Http/Clients/
‚îú‚îÄ‚îÄ GitHub/
‚îÇ   ‚îú‚îÄ‚îÄ Attributes/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ GetUserAttribute.php
‚îÇ   ‚îú‚îÄ‚îÄ Requests/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ GetUserRequest.php
‚îÇ   ‚îú‚îÄ‚îÄ Responses/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GetUserResponse.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ BadResponse.php
‚îÇ   ‚îî‚îÄ‚îÄ Factories/
‚îÇ       ‚îî‚îÄ‚îÄ ApiFactory.php
‚îî‚îÄ‚îÄ ...

tests/Unit/Http/Clients/
‚îú‚îÄ‚îÄ GitHub/
‚îÇ   ‚îú‚îÄ‚îÄ Attributes/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ GetUserAttributeTest.php
‚îÇ   ‚îú‚îÄ‚îÄ Requests/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ GetUserRequestTest.php
‚îÇ   ‚îú‚îÄ‚îÄ Responses/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GetUserResponseTest.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ BadResponseTest.php
‚îÇ   ‚îî‚îÄ‚îÄ Factories/
‚îÇ       ‚îî‚îÄ‚îÄ ApiFactoryTest.php
‚îî‚îÄ‚îÄ ...
```

## üîß –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ö–æ–º–∞–Ω–¥—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª–∞—Å—Å–æ–≤

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –û–ø—Ü–∏–∏ |
|---------|----------|-------|
| `http-client-generator:all` | –°–æ–∑–¥–∞—Ç—å –≤—Å–µ –∫–ª–∞—Å—Å—ã —Å—Ä–∞–∑—É | `--namespace`, `--path`, `--tests-path`, `--no-tests` |
| `http-client-generator:attribute` | –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å –∞—Ç—Ä–∏–±—É—Ç–æ–≤ | `--namespace`, `--path`, `--tests-path`, `--no-tests` |
| `http-client-generator:request` | –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å –∑–∞–ø—Ä–æ—Å–∞ | `--namespace`, `--path`, `--tests-path`, `--no-tests` |
| `http-client-generator:response` | –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å –æ—Ç–≤–µ—Ç–∞ | `--namespace`, `--path`, `--tests-path`, `--no-tests` |
| `http-client-generator:bad-response` | –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å –æ—à–∏–±–∫–∏ | `--namespace`, `--path`, `--tests-path`, `--no-tests` |
| `http-client-generator:factory` | –°–æ–∑–¥–∞—Ç—å —Ñ–∞–±—Ä–∏–∫—É | `--namespace`, `--path`, `--tests-path`, `--no-tests` |

### –ö–æ–º–∞–Ω–¥—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –û–ø—Ü–∏–∏ |
|---------|----------|-------|
| `http-client-generator:test:all` | –°–æ–∑–¥–∞—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã | `--test-namespace` |
| `http-client-generator:test:attribute` | –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç –∞—Ç—Ä–∏–±—É—Ç–æ–≤ | `--test-namespace` |
| `http-client-generator:test:request` | –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç –∑–∞–ø—Ä–æ—Å–∞ | `--test-namespace` |
| `http-client-generator:test:response` | –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç –æ—Ç–≤–µ—Ç–∞ | `--test-namespace` |
| `http-client-generator:test:bad-response` | –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç –æ—à–∏–±–∫–∏ | `--test-namespace` |
| `http-client-generator:test:factory` | –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç —Ñ–∞–±—Ä–∏–∫–∏ | `--test-namespace` |

## üìö –°—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

- **[EXAMPLES.md](EXAMPLES.md)** - –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–º–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏

## üîß –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- PHP ^8.1
- Laravel ^10.0|^11.0|^12.0

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ —Ñ–∞–π–ª–µ [LICENSE](LICENSE).